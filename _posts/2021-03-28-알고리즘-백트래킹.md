---
title: "백트래킹, BOJ 15649번 N과 M(1)"
excerpt: "백트래킹의 개념과 파이썬 코드를 활용한 설명입니다."
categories:
    - 알고리즘
    - 파이썬
    - 코딩테스트
tags:
    - 백트래킹
    - BOJ
    - 느낀점
toc: true
toc_sticky: true
use_math: true
---

## 1. 참고한 자료 및 출처
백트래킹에 관련된 글은 [바킹독님 블로그](https://blog.encrypted.gg/945?category=773649)를 참고하였음을 밝힙니다.

## 2. 백트래킹이란 ?
모든 가능한 선택지를 재귀적인 코드로 수행하여 결과를 도출하는 알고리즘입니다.

알고리즘의 흐름도를 그리면 다음과 같은 모양이 됩니다.</br>
![image1](/assets/images/백트래킹1.jpg)
_출처 : 나무위키_

## 3. 백트래킹의 장, 단점
1. 백트래킹은 상당한 구현력을 필요로 합니다.(단점)
2. 재귀를 이용하여 구현하기에 틀려도 어느 부분에서 틀렸는지 알아차리기 어렵습니다.(단점)
3. 백트래킹을 응용하여 낼 수 있는 문제는 한정적이기 때문에 한 번 익혀두면 할만 합니다. (장점)

## 4. 알고리즘 설명 및 예제 (boj 15649번 N과 M(1))
1. 재귀적으로 구현이 되기 때문에, 재귀의 기본인 **Base Condition**, **명확한 함수 인자**, **자기 자신의 재호출 금지**와 함께 귀납적 사고방식을 떠올리시고 문제를 접근해야 합니다.

2. 모든 경우의 수를 탐색해야 하기 때문에 재귀 코드와 함께 isused 배열이 필요합니다.
    * isused 배열이란 ?
    예를 들어 1,2,3,4의 4개 숫자를 순열로 3개를 선택하는 경우를 생각해 봅니다.
    이 문제의 답은 (1,2,3), (1,2,4) (1,3,2) ... 처럼 24개를 적으면서 풀게 되면, 우리는 자연스럽게 1,2,3 다음에 1,2,4를 적습니다. 3은 이미 사용했기 때문에 배제하는 것이죠. isused는 이 배제하는 3을 적어놓는 공간이라고 이해하시면 됩니다.

3. N과 M(1) 문제에서는 자연수 1부터 N까지 자연수 중에서 중복 없이 M개를 고르는 수열, 즉 순열을 구해 출력하면 됩니다.

4. Base Condition은 재귀의 깊이가 M까지 깊어지거나, 정답을 담은 배열의 크기가 M이 될 때 재귀를 그만 두면 되겠습니다. 

5. 함수로 사용되는 인자 값은, N, M, ret(결과를 담을 배열), isused가 필요합니다.

6. 다음 코드는 정답 코드입니다.

```python
f = open('testcase.txt', 'r')
n, m = list(map(int,f.readline().split()))


isused = [0 for i in range(n+1)]

def permutation(n, m, ret, isused):
    if len(ret) == m: # 결과를 담은 배열이 M크기가 되었을 때 base condition
        for item in ret:
            print(item, end = ' ')
        print()
    else :
        for i in range(n):
            if isused[i+1] == 0: #문제에서 1 ~ N까지라고 주어졌기 때문에, i+1을 해줌.
                isused[i+1] = 1
                ret.append(i + 1)
                permutation(n, m, ret, isused)
                ret.pop() #재귀가 끝나고 돌아왔을 때, ret의 마지막 원소를 pop해줘야 다음 재귀를 돌 수 있음.
                isused[i+1] = 0 #마지막 원소를 사용하지 않은 것으로 처리.

ret = []
permutation(n, m, ret, isused)
```  

## 5.느낀점.
재귀 or 백트래킹은 정렬의 Merge Sort에서도 사용이 되는 알고리즘이기 때문에 정렬 부분을 포스팅 할 때, 재귀 혹은 백트래킹 포스팅을 새로 업데이트 할 예정입니다.